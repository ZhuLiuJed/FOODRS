<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>登录</title>
		<link rel="stylesheet" href="../plugins/layui/css/layui.css" />
		<script type="text/javascript" src="../plugins/layui/layui.js" ></script>
		<script type="text/javascript" src="../js/jquery-3.2.1.min.js" ></script>
	</head>
	<body>
		<div class="layui-tab layui-tab-brief" lay-filter="docDemoTabBrief" id="aa">
		 <ul class="layui-tab-title">
		    <li class="layui-this">登录</li>
		    <li>注册</li>
		 </ul>
	  	<div class="layui-tab-content">
	  		<div class="layui-tab-item layui-show">
	  			<form class="layui-form" >
	  				<div class="layui-form-item">
					    <label class="layui-form-label">账号</label>
					    <div class="layui-input-inline">
					    	<input type="text" name="user" required  lay-verify="required" placeholder="请输入账号" autocomplete="off" class="layui-input">
					    </div>
					 </div>
	  				<div class="layui-form-item">
					    <label class="layui-form-label">密码</label>
					    <div class="layui-input-inline">
					     	<input type="password" name="loginpassword" required lay-verify="required" placeholder="请输入密码" autocomplete="off" class="layui-input">
					    </div>
					</div>
					<div class="layui-form-item ">
						
					    <label class="layui-form-label">记住</label>
					    <div class="layui-input-block">
					        <input type="checkbox" name="jzmm" lay-skin="switch">
					     &emsp;
					    	<button class="layui-btn layui-btn-radius" lay-submit lay-filter="formlogin">登录</button>
					    </div>
					</div>
	  			</form>
	  			<div>
		  			<span>第三方登录：对不起没钱搞</span>
		  			<i class="layui-icon" style="font-size: 30px; color: #1E9FFF;">&#xe60c;</i>  
	  			</div>
	  			<div>
		  			<span>忘记密码？点击注册页签快速注册</span>
		  			<i class="layui-icon" style="font-size: 30px; color: #1E9FFF;">&#xe60c;</i>  
	  			</div>
	  		</div>
   			<div class="layui-tab-item">
   				<form class="layui-form" >
   					<div class="layui-form-item">
					    <label class="layui-form-label">昵称</label>
					    <div class="layui-input-inline">
					    	<input type="text" name="nickname" required  lay-verify="nickname" placeholder="请输入昵称" autocomplete="off" class="layui-input">
					    </div>
					 </div>
	  				<div class="layui-form-item">
					    <label class="layui-form-label">账号</label>
					    <div class="layui-input-inline">
					    	<input type="text" name="username" required  lay-verify="username" placeholder="请输入账号" autocomplete="off" class="layui-input">
					    </div>
					 </div>
	  				<div class="layui-form-item">
					    <label class="layui-form-label">密码</label>
					    <div class="layui-input-inline">
					     	<input type="password" name="password" required lay-verify="password" placeholder="请输入密码" autocomplete="off" class="layui-input">
					    </div>
					</div>
					<div class="layui-form-item">
					    <label class="layui-form-label">确认密码</label>
					    <div class="layui-input-inline">
					     	<input type="password" name="rpassword" required lay-verify="required" placeholder="再次输入密码" autocomplete="off" class="layui-input">
					    </div>
					</div>
					<div class="layui-form-item">
					    <div class="layui-input-block">
					      <button class="layui-btn" lay-submit lay-filter="formreg">立即提交</button>
					      <button type="reset" class="layui-btn layui-btn-primary">重置</button>
					    </div>
					 </div>
	  			</form>
   			</div>
	  	</div>
	</div>  
	</body>
	<script>
		layui.use('element', function(){
		  var element = layui.element; //导航的hover效果、二级菜单等功能，需要依赖element模块
		});
		layui.use('form', function(){
  		var form = layui.form;
 			form.verify({
                    nickname : function(value) {
                        if (value.length <= 5) {            	
                            return '至少输入5个字符啊';
                        }
                        if(!new RegExp("^[a-zA-Z0-9_\u4e00-\u9fa5\\s·]+$").test(value)){
					      return '不能有特殊字符';
					    }
					    if(/(^\_)|(\__)|(\_+$)/.test(value)){
					      return '首尾不能出现下划线\'_\'';
					    }
					    if (value.length == 0) {            	
                            return '不能为空';
                        }
                    },
                    username: function(value) {
                    	if(value.indexOf(" ")!=-1){
                    		return '不能含有空格';
                    	}
                        if (value.length < 5) {
                            return '至少输入6个字符啊';
                        }
                        if(!new RegExp("^[a-zA-Z0-9_\u4e00-\u9fa5\\s·]+$").test(value)){
					      return '账号不能有特殊字符';
					    }
					    if(/(^\_)|(\__)|(\_+$)/.test(value)){
					      return '账号首尾不能出现下划线\'_\'';
					    }
					    if(/^\d+\d+\d$/.test(value)){
					      return '账号不能全为数字';
					    }
					    if (value.length == 0) {            	
                            return '不能为空';
                        }
                    }
            });
 			form.on('submit(formlogin)', function(data){
 				$.ajax({
 					type:"post",
 					url:"",
 					data:JSON.stringify(data.field),
 					dataType: "json",
					success: function (data) {
						if(data.msg == "success"){
						layer.msg("登录成功");
						var index = parent.layer.getFrameIndex(window.name); //先得到当前iframe层的索引
						parent.layer.close(index); //再执行关闭   
						}else{
						layer.msg("账号或密码不正确");
						}
					},
					error: function () {
						
					}
 				});
 				layer.msg(JSON.stringify(data.field));
  		  		return false;
 			 });
 			 form.on('submit(formreg)', function(data){
 				$.ajax({
 					type:"post",
 					url:"",
 					data:JSON.stringify(data.field),
 					dataType: "json",
					success: function (data) {
					},
					error: function () {
						
					},
					complete: function () {
						
					}
 				});
 				layer.msg(JSON.stringify(data.field));
  		  		return false;
 			 });

});
	</script><script>
//Demo

</script>

</html>
